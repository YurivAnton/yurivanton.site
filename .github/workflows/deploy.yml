name: üöÄ FTP Deploy to Websupport

on:
  push:
    branches:
      - main  # –∑–º—ñ–Ω–∏—Ç–∏, —è–∫—â–æ –¥–µ–ø–ª–æ—ó—à –∑ —ñ–Ω—à–æ—ó –≥—ñ–ª–∫–∏

jobs:
  ftp-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: üì• Checkout code
        uses: actions/checkout@v3

      - name: üõ† Install Composer dependencies (optional)
        run: composer install --no-dev --prefer-dist --optimize-autoloader

      - name: üßº Cleanup (optional)
        run: |
          rm -rf tests
          rm -rf .git
          rm -rf node_modules

      - name: üì§ FTP Deploy
        uses: ftp-deploy-action/ftp-deploy-action@v1
        with:
          ftp-server: ${{ secrets.FTP_HOST }}
          ftp-username: ${{ secrets.FTP_USERNAME }}
          ftp-password: ${{ secrets.FTP_PASSWORD }}
          ftp-port: 21
          remote-dir: /web/  # –ó–∞–º—ñ–Ω–∏ –Ω–∞ —Å–≤—ñ–π —à–ª—è—Ö
          local-dir: ./      # –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î –≤—Å—ñ –ª–æ–∫–∞–ª—å–Ω—ñ —Ñ–∞–π–ª–∏
          exclude: |
            **/.git*
            **/.github*
            **/node_modules/**
            **/tests/**
            .env
            README.md